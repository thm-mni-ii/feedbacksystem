openapi: 3.0.0
info:
  title: Feedbacksystem
  description: Feedbacksystem API
  version: 1.0.0
  contact:
    email: Andrej.Sajenko@mni.thm.de
  license:
    name: CC BY-NC-SA 4.0
    url: https://creativecommons.org/licenses/by-nc-sa/4.0/
tags:
  - name: Login
    description: Login api
  - name: User
    description: The user api
  - name: Course
    description: The course api
  - name: Semester
    description: The Semester api
  - name: Course Registration
    description: The course registration api
  - name: Group
    description: The group API
  - name: GroupMembership
    description: The group Membership
  - name: Task
    description: The task api
  - name: Course evaluation
    description: Course evaluation api
  - name: Course Results
    description: Course Results api
  - name: Checker Configuration
    description: Checker configuration api
  - name: Submission
    description: Task submission api
  - name: Legal
    description: Legally obligatory documents and checks
  - name: Result
    description: Incomming checker results
  - name: Analysis
    description: Routes to query data for analysis purposes
  - name: SQL Checker
    description: Routes used for SQL-Checker quering
  - name: SQL Playground API
    description: API used to interact with the SQL Playground
security:
  - JWT: [ ]

paths:
  /login/cas:
    post:
      security: [ ]
      operationId: casLogin
      tags:
        - Login
      summary: Login into system via the cas protocol
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
        "401":
          description: Unauthorized
  /login/ldap:
    post:
      security: [ ]
      operationId: ldapLogin
      tags:
        - Login
      summary: Login into system via username and password
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - username
                - password
              properties:
                username:
                  type: string
                password:
                  type: string
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
        "401":
          description: Unauthorized
  /login/local:
    post:
      security: [ ]
      operationId: localLogin
      tags:
        - Login
      summary: Login into system via username and password
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - username
                - password
              properties:
                username:
                  type: string
                password:
                  type: string
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
        "401":
          description: Unauthorized
  /users:
    get:
      operationId: getUsers

      tags:
        - User
      summary: Get user list
      description: ""
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/User"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
    post:
      operationId: createUser

      tags:
        - User
      summary: Create a new user
      description: ""
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/User"
        description: User object to create
        required: true
      responses:
        "201":
          description: Created
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
        "400":
          description: Invalid Format
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "409":
          description: Already Existing
  "/users/{uid}":
    get:
      operationId: getUser

      tags:
        - User
      summary: Find user by ID
      description: Returns a single user
      parameters:
        - name: uid
          in: path
          description: user id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not found
    delete:
      operationId: deleteUser

      tags:
        - User
      summary: Delete user by ID
      description: ""
      parameters:
        - name: uid
          in: path
          description: user id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
  "/users/{uid}/passwd":
    put:
      operationId: changeUserPassword

      tags:
        - User
      summary: Change password of a local user
      description: ""
      parameters:
        - name: uid
          in: path
          description: user id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - passwd
                - passwdRepeat
              properties:
                passwd:
                  type: string
                passwdRepeat:
                  type: string
        description: The new password
        required: true
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
        "400":
          description: Invalid Format
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not found
  "/users/{uid}/global-role":
    put:
      operationId: getUserGlobalRole

      tags:
        - User
      summary: Change global role of a user
      description: ""
      parameters:
        - name: uid
          in: path
          description: user id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - roleName
              properties:
                roleName:
                  type: string
        description: The global role id
        required: true
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
        "400":
          description: Invalid Format
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not found
  "/users/{uid}/courses":
    get:
      operationId: getUserCourses

      tags:
        - Course Registration
      summary: Get all registered courses
      description: ""
      parameters:
        - name: uid
          in: path
          description: user id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Course"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not found
  "/courses/{cid}/participants":
    get:
      operationId: getCourseParticipants

      tags:
        - Course Registration
      summary: Get all participants of a course
      description: ""
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Participant"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not found
  "/users/{uid}/courses/{cid}":
    put:
      operationId: registerCourseUser

      tags:
        - Course Registration
      summary: Register a user into a course
      parameters:
        - name: uid
          in: path
          description: user id
          required: true
          schema:
            type: integer
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - roleName
              properties:
                roleName:
                  type: string
        description: "Course role: either DOCENT, TUTOR, or STUDENT. Default is STUDENT"
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not found
    delete:
      operationId: deRegisterCourseUser

      tags:
        - Course Registration
      summary: De-register a user from a course
      parameters:
        - name: uid
          in: path
          description: user id
          required: true
          schema:
            type: integer
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
  "/courses/{cid}/deregisterrole":
    put:
      operationId: deregisterAllCourseUsersWithRole

      tags:
        - Course Registration
      summary: Deregister all users with a specific role
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - roleName
              properties:
                roleName:
                  type: string
        description: "All users with the roleName role get deregistered from the course with uid"
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not found
  "/courses/{cid}/deregisterall":
    put:
      operationId: deregisterAllCourseUsersExceptCurrent

      tags:
        - Course Registration
      summary: Deregister all users except the current user from the course
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not found
  /courses:
    get:
      operationId: getCourses

      tags:
        - Course
      summary: Get a list of all courses
      description: ""
      parameters:
        - name: visible
          in: query
          description: Returns all courses that satisfy the visibility value [true, false]
          schema:
            type: boolean
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Course"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
    post:
      operationId: createCourse

      tags:
        - Course
      summary: Create a new course
      description: ""
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Course"
        description: Course object to create
        required: true
      responses:
        "201":
          description: Created
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Course"
        "400":
          description: Invalid Format
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
  "/courses/{cid}":
    get:
      operationId: getCourse

      tags:
        - Course
      summary: Get a course
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Course"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not found
    put:
      operationId: updateCourse

      tags:
        - Course
      summary: Update course
      description: ""
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Course"
        description: Course object to update
        required: true
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
        "400":
          description: Invalid format
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not found
    delete:
      operationId: deleteCourse

      tags:
        - Course
      summary: Delete course by ID
      description: ""
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
  /semester:
    get:
      operationId: getSemesters

      tags:
        - Semester
      summary: Get a list of all Semester-contents
      description: ""
      parameters:
        - name: visible
          in: query
          description: Returns all Semester that exist
          schema:
            type: boolean
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Semester"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
    post:
      operationId: createSemester

      tags:
        - Semester
      summary: Create a new Semester
      description: ""
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SemesterCreate"
        description: Semester object to create
        required: true
      responses:
        "201":
          description: Created
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Semester"
        "400":
          description: Invalid Format
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
  "/semester/{sid}":
    get:
      operationId: getSemester

      tags:
        - Semester
      summary: Get a semester
      parameters:
        - name: sid
          in: path
          description: semester id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Semester"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not found
    put:
      operationId: updateSemester

      tags:
        - Semester
      summary: Update Semester
      description: ""
      parameters:
        - name: sid
          in: path
          description: semester id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Semester"
        description: Semester object to update
        required: true
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
        "400":
          description: Invalid format
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not found
    delete:
      operationId: deleteSemester

      tags:
        - Semester
      summary: Delete Semester by ID
      description: ""
      parameters:
        - name: sid
          in: path
          description: semester id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
  /courses/{cid}/groups:
    get:
      operationId: getGroups
      tags:
        - Group
      summary: Get a group list
      parameters:
        - name: cid
          in: path
          required: true
          schema:
            type: integer
        - name: visible
          in: query
          required: false
          schema:
            type: boolean
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Group'
        '403':
          description: Forbidden
    post:
      operationId: createGroup
      tags:
        - Group
      summary: Create a new group
      parameters:
        - name: cid
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GroupRequest'
      responses:
        '200':
          description: Group created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Group'
        '400':
          description: Bad Request
        '403':
          description: Forbidden
  /courses/{cid}/groups/{gid}:
    get:
      operationId: getGroup
      tags:
        - Group
      summary: Get a single group by id
      parameters:
        - name: cid
          in: path
          required: true
          schema:
            type: integer
        - name: gid
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Group'
        '403':
          description: Forbidden
        '404':
          description: Not Found
    put:
      operationId: updateGroup
      tags:
        - Group
      summary: Update a single group by id
      parameters:
        - name: cid
          in: path
          required: true
          schema:
            type: integer
        - name: gid
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GroupRequest'
      responses:
        '204':
          description: No Content
        '400':
          description: Bad Request
        '403':
          description: Forbidden
    delete:
      operationId: deleteGroup
      tags:
        - Group
      summary: Delete a group by id
      parameters:
        - name: cid
          in: path
          required: true
          schema:
            type: integer
        - name: gid
          in: path
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: No Content
        '403':
          description: Forbidden
  /courses/{cid}/groups/{gid}/users/{uid}:
    put:
      tags:
        - GroupMembership
      summary: Add a user to a group within a course
      operationId: addUserToGroup
      parameters:
        - name: cid
          in: path
          required: true
          schema:
            type: integer
          description: Course ID
        - name: gid
          in: path
          required: true
          schema:
            type: integer
          description: Group ID
        - name: uid
          in: path
          required: true
          schema:
            type: integer
          description: User ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: User added to the group
        '403':
          description: Forbidden
        '404':
          description: Resource not found
        '409':
          description: Membership exceeded
    delete:
      tags:
        - GroupMembership
      summary: Remove a user from a group
      operationId: removeUserFromGroup
      parameters:
        - name: cid
          in: path
          required: true
          schema:
            type: integer
          description: Course ID
        - name: gid
          in: path
          required: true
          schema:
            type: integer
          description: Group ID
        - name: uid
          in: path
          required: true
          schema:
            type: integer
          description: User ID
      responses:
        '200':
          description: User removed from the group
        '403':
          description: Forbidden
  /courses/{cid}/groups/{gid}/users:
    delete:
      tags:
        - GroupMembership
      summary: Remove all users from a group
      operationId: removeAllUsersFromGroup
      parameters:
        - name: cid
          in: path
          required: true
          schema:
            type: integer
          description: Course ID
        - name: gid
          in: path
          required: true
          schema:
            type: integer
          description: Group ID
      responses:
        '200':
          description: All users removed from the group
        '403':
          description: Forbidden
  /users/{uid}/groups:
    get:
      tags:
        - GroupMembership
      summary: Retrieve all groups of a specific user
      operationId: getUserGroups
      parameters:
        - name: uid
          in: path
          required: true
          schema:
            type: integer
          description: User ID
      responses:
        '200':
          description: List of groups
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Group'
        '403':
          description: Forbidden
  /courses/{cid}/groups/{gid}/participants:
    get:
      tags:
        - GroupMembership
      summary: Get all course participants who are part of a group
      operationId: getGroupParticipants
      parameters:
        - name: cid
          in: path
          required: true
          schema:
            type: integer
          description: Course ID
        - name: gid
          in: path
          required: true
          schema:
            type: integer
          description: Group ID
      responses:
        '200':
          description: List of course participants
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
        '403':
          description: Forbidden
  "/courses/{cid}/tasks":
    get:
      operationId: getCourseTasks

      tags:
        - Task
      summary: Get all tasks of a course
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Task"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not found
    post:
      operationId: createCourseTask

      tags:
        - Task
      summary: Create a new task for this course
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
      requestBody:
        $ref: "#/components/requestBodies/Task"
      responses:
        "201":
          description: Created
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Task"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not found
  "/courses/{cid}/tasks/results":
    get:
      operationId: getCourseTasksResults

      tags:
        - Task
      summary: Get all the result for the tasks
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/UserTaskResult"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not found
  "/courses/{cid}/tasks/{tid}":
    get:
      operationId: getCourseTask

      tags:
        - Task
      summary: Get a task by id
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
        - name: tid
          in: path
          description: task id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Task"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not found
    put:
      operationId: updateCourseTask

      tags:
        - Task
      summary: Update an existing task for this course
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
        - name: tid
          in: path
          description: task id
          required: true
          schema:
            type: integer
      requestBody:
        $ref: "#/components/requestBodies/Task"
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            "*/*":
              schema:
                $ref: "#/components/schemas/Task"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not found
    delete:
      operationId: deleteCourseTask

      tags:
        - Task
      summary: Delete a task by id
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
        - name: tid
          in: path
          description: task id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
  "/courses/{cid}/tasks/{tid}/result":
    get:
      operationId: getCourseTaskResult

      tags:
        - Task
      summary: Gets the task result by id
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
        - name: tid
          in: path
          description: task id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserTaskResult"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not found
  "/courses/{cid}/tasks/{tid}/export":
    get:
      operationId: exportCourseTask
      tags:
        - Task
      summary: Get a Tar-Archive of the Task which contains all Checker Configurations of the Task
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
        - name: tid
          in: path
          description: task id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            application/octet-stream:
              schema:
                type: string
                format: tar
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not found
  "/courses/{cid}/tasks/export":
    post:
      operationId: exportTasks
      tags:
        - Task
      summary: Get a Tar-Archive of all the chosen Tasks which contain all Checker Configurations of those Tasks
      requestBody:
        required: true
        content:
          "application/json":
            schema:
              type: object
              required:
                - taskIds
              properties:
                taskIds:
                  type: array
                  items:
                    type: integer
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            application/octet-stream:
              schema:
                type: string
                format: tar
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not found
  "/courses/{cid}/tasks/export/all":
    get:
      operationId: exportAllTasks
      tags:
        - Task
      summary: Get a Tar-Archive of all the Tasks which contain all Checker Configurations of all the Tasks from a specified course
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            application/octet-stream:
              schema:
                type: string
                format: tar
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not found
  "/courses/evaluation/formula/validate":
    post:
      operationId: validateCourseEvaluationFormula

      tags:
        - Course evaluation
      summary: Validate a evaluation formula
      requestBody:
        required: true
        content:
          "application/json":
            schema:
              type: object
              properties:
                formula:
                  type: string
      responses:
        "200":
          description: Formula is valid
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            "application/json":
              schema:
                type: object
                properties:
                  valid:
                    type: boolean
                    default: true
                  message:
                    type: string

        "400":
          description: Formula is invalid
          content:
            "application/json":
              schema:
                type: object
                properties:
                  valid:
                    type: boolean
                    default: false
                  message:
                    type: string
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
  "/courses/{cid}/evaluation/container":
    get:
      operationId: getCourseEvaluationContainers

      tags:
        - Course evaluation
      summary: Get all Course evaluation Containers
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            "application/json":
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/EvaluationContainer"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
    post:
      operationId: createCourseEvaluationContainer

      tags:
        - Course evaluation
      summary: Create a Course evaluation Container
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AddEvaluationContainer"
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            "application/json":
              schema:
                $ref: "#/components/schemas/EvaluationContainer"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found

  "/courses/{cid}/evaluation/container/{ctid}":
    get:
      operationId: getCourseEvaluationContainer

      tags:
        - Course evaluation
      summary: Get a Course evaluation Container
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
        - name: ctid
          in: path
          description: Container id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            "application/json":
              schema:
                $ref: "#/components/schemas/EvaluationContainer"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
    put:
      operationId: updateCourseEvaluationContainer

      tags:
        - Course evaluation
      summary: Update a Course evaluation Container
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
        - name: ctid
          in: path
          description: Container id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AddEvaluationContainer"
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            "application/json":
              schema:
                $ref: "#/components/schemas/EvaluationContainer"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
    delete:
      operationId: deleteCourseEvaluationContainer

      tags:
        - Course evaluation
      summary: Delete a Course evaluation Container
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
        - name: ctid
          in: path
          description: Container id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            "application/json":
              schema:
                $ref: "#/components/schemas/EvaluationContainer"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
  "/courses/{cid}/evaluation/container/{ctid}/task/{tid}":
    post:
      operationId: addTaskToCourseEvaluationContainer

      tags:
        - Course evaluation
      summary: Add a Task to an Course evaluation Container
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
        - name: ctid
          in: path
          description: Container id
          required: true
          schema:
            type: integer
        - name: tid
          in: path
          description: Task id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            "application/json":
              schema:
                $ref: "#/components/schemas/EvaluationContainer"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
    delete:
      operationId: deleteTaskFromCourseEvaluationContainer

      tags:
        - Course evaluation
      summary: Delate a Task from an Course evaluation Container
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
        - name: ctid
          in: path
          description: Container id
          required: true
          schema:
            type: integer
        - name: tid
          in: path
          description: Task id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            "application/json":
              schema:
                $ref: "#/components/schemas/EvaluationContainer"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found

  "/courses/{cid}/results":
    get:
      operationId: getCourseResults

      tags:
        - Course Results
      summary: Get the Results for a Course
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            "application/json":
              schema:
                $ref: "#/components/schemas/CourseResult"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found

  "/courses/{cid}/evaluation/results":
    get:
      operationId: getCourseEvaluationResults

      tags:
        - Course Results
      summary: Get the Evaluation Results for a Course
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            "application/json":
              schema:
                $ref: "#/components/schemas/EvaluationResults"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found

  "/courses/{cid}/statistics/subtasks":
    get:
      operationId: getCourseSubtaskStatistic

      tags:
        - Course Statistics
      summary: Get the Subtask statistic for a course
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            "application/json":
              schema:
                $ref: "#/components/schemas/SubTaskStatistics"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
  "/users/{uid}/courses/{cid}/tasks/{tid}/submissions":
    get:
      operationId: getCourseTaskSubmissions

      tags:
        - Submission
      summary: Get all submissions for a task
      parameters:
        - name: uid
          in: path
          description: user id
          required: true
          schema:
            type: integer
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
        - name: tid
          in: path
          description: task id
          required: true
          schema:
            type: integer
        - in: query
          name: passed
          description: Filters only the passed submissions
          schema:
            type: boolean
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            "*/*":
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Submission"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
    post:
      operationId: submitCourseTaskSolution

      tags:
        - Submission
      summary: Submit a solution for a task
      parameters:
        - name: uid
          in: path
          description: user id
          required: true
          schema:
            type: integer
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
        - name: tid
          in: path
          description: task id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          "*/*":
            schema:
              format: binary
        description: The solution for the task
        required: true
      responses:
        "201":
          description: Created
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Submission"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
  "/users/{uid}/courses/{cid}/tasks/{tid}/submissions/{sid}/content":
    get:
      operationId: getCourseTaskSubmissionsContent
      tags:
        - Submission
      summary: Get the submission content for a task
      parameters:
        - name: uid
          in: path
          description: user id
          required: true
          schema:
            type: integer
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
        - name: tid
          in: path
          description: task id
          required: true
          schema:
            type: integer
        - name: sid
          in: path
          description: submission id
          required: true
          schema:
            type: integer
        - in: query
          name: passed
          description: Filters only the passed submissions
          schema:
            type: boolean
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            application/octet-stream:
              schema:
                type: string
                format: tar
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
  "/users/courses/{cid}/tasks/submissions/content":
    get:
      operationId: solutionsOfCourse
      tags:
        - Submission
      summary: Get the submission content for a course
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
        - in: query
          name: passed
          description: Filters only the passed submissions
          schema:
            type: boolean
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            application/octet-stream:
              schema:
                type: string
                format: tar
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
  "/users/courses/{cid}/tasks/{tid}/submissions/content":
    get:
      operationId: solutionsOfTask
      tags:
        - Submission
      summary: Get the submission content for a task
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
        - name: tid
          in: path
          description: task id
          required: true
          schema:
            type: integer
        - in: query
          name: passed
          description: Filters only the passed submissions
          schema:
            type: boolean
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            application/octet-stream:
              schema:
                type: string
                format: tar
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
  "/users/{uid}/courses/{cid}/tasks/{tid}/submissions/{sid}/subresults":
    get:
      operationId: getCourseTaskSubmissionSubresults

      tags:
        - Submission
      summary: Get all subresults for a submission
      parameters:
        - name: uid
          in: path
          description: user id
          required: true
          schema:
            type: integer
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
        - name: tid
          in: path
          description: task id
          required: true
          schema:
            type: integer
        - name: sid
          in: path
          description: submission id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            "*/*":
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/SubTaskResult"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
  "/users/{uid}/courses/{cid}/tasks/{tid}/submissions/{sid}":
    put:
      operationId: restartCourseTaskSubmission

      tags:
        - Submission
      summary: Restart the submission process
      parameters:
        - name: uid
          in: path
          description: user id
          required: true
          schema:
            type: integer
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
        - name: tid
          in: path
          description: task id
          required: true
          schema:
            type: integer
        - name: sid
          in: path
          description: ID of submission
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
    get:
      operationId: getCourseTaskSubmission

      tags:
        - Submission
      summary: Get the current submission state
      parameters:
        - name: uid
          in: path
          description: user id
          required: true
          schema:
            type: integer
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
        - name: tid
          in: path
          description: task id
          required: true
          schema:
            type: integer
        - name: sid
          in: path
          description: ID of submission
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Submission"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
  "/submissions/{submissionID}":
    get:
      operationId: getCourseTaskSubmissionContent
      tags:
        - Submission
      summary: Get the content of a submission
      parameters:
        - name: submissionID
          in: path
          description: the submission id
          required: true
          schema:
            type: integer
        - name: token
          in: query
          description: the token granting access to the submission
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            "text/plain":
              schema:
                type: string
                description: The submission content
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
  "/courses/{cid}/tasks/{tid}/checker-configurations":
    get:
      operationId: getCourseTaskCheckerConfigurations

      tags:
        - Checker Configuration
      summary: Get a list of configured checkers
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
        - name: tid
          in: path
          description: task id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/CheckerConfig"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
    post:
      operationId: createCourseTaskCheckerConfigurations

      tags:
        - Checker Configuration
      summary: Create a new checker configuration
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
        - name: tid
          in: path
          description: task id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CheckerConfig"

      responses:
        "201":
          description: Created
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CheckerConfig"
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
  "/courses/{cid}/tasks/{tid}/checker-configurations/{ccid}":
    put:
      operationId: updateCourseTaskCheckerConfigurations

      tags:
        - Checker Configuration
      summary: Update an existing checker configuration
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
        - name: tid
          in: path
          description: task id
          required: true
          schema:
            type: integer
        - name: ccid
          in: path
          description: ID of checker configuration
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CheckerConfig"
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
    delete:
      operationId: deleteCourseTaskCheckerConfigurations

      tags:
        - Checker Configuration
      summary: Delete an existing checker configuration
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
        - name: tid
          in: path
          description: task id
          required: true
          schema:
            type: integer
        - name: ccid
          in: path
          description: ID of checker configuration
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
  "/courses/{cid}/tasks/{tid}/checker-configurations/{ccid}/main-file":
    get:
      operationId: getCourseTaskCheckerConfigurationsMainFile

      tags:
        - Checker Configuration
      summary: Get a the main file of the configuration
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
        - name: tid
          in: path
          description: task id
          required: true
          schema:
            type: integer
        - name: ccid
          in: path
          description: configuration id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            text/*:
              schema:
                type: string
                format: binary
            application/*:
              schema:
                type: string
                format: binary
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
    put:
      operationId: updateCourseTaskCheckerConfigurationsMainFile

      tags:
        - Checker Configuration
      summary: Update / upload a new file
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
        - name: tid
          in: path
          description: task id
          required: true
          schema:
            type: integer
        - name: ccid
          in: path
          description: configuration id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        description: new file
        content:
          "*/*":
            schema:
              type: string
              format: binary
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
  "/courses/{cid}/tasks/{tid}/checker-configurations/{ccid}/secondary-file":
    get:
      operationId: getCourseTaskCheckerConfigurationsSecondaryFile

      tags:
        - Checker Configuration
      summary: Get a list of configured checkers
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
        - name: tid
          in: path
          description: task id
          required: true
          schema:
            type: integer
        - name: ccid
          in: path
          description: configuration id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            text/*:
              schema:
                type: string
                format: binary
            application/*:
              schema:
                type: string
                format: binary
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
    put:
      operationId: updateCourseTaskCheckerConfigurationsSecondaryFile

      tags:
        - Checker Configuration
      summary: Update / upload a new file
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
        - name: tid
          in: path
          description: task id
          required: true
          schema:
            type: integer
        - name: ccid
          in: path
          description: configuration id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        description: new file
        content:
          "*/*":
            schema:
              type: string
              format: binary
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
  /legal/impressum:
    get:
      operationId: getImpressum
      tags:
        - Legal
      summary: Returns the imprint
      responses:
        "200":
          description: OK
          content:
            "*/*":
              schema:
                type: string
                format: binary
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
  /legal/privacy-text:
    get:
      operationId: getPrivacyText
      tags:
        - Legal
      summary: Returns the information how user data is treated in the system
      responses:
        "200":
          description: OK
          content:
            "*/*":
              schema:
                type: string
                format: binary
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
  "/legal/termsofuse/{uid}":
    get:
      operationId: getTermsOfUse
      tags:
        - Legal
      summary: Get the information if a user accepted the terms of usage
      parameters:
        - in: path
          name: uid
          required: true
          description: User id
          schema:
            type: integer
      responses:
        "200":
          description: OK
          content:
            "*/*":
              schema:
                type: object
                properties:
                  accepted:
                    type: boolean
                    description: True if accepted, false otherwise
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
    put:
      operationId: acceptTermsOfUse
      tags:
        - Legal
      summary: Accept the terms of usage
      parameters:
        - in: path
          name: uid
          required: true
          description: User id
          schema:
            type: integer
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
  "/results/{sid}/{cid}":
    put:
      operationId: storeCheckerResults
      tags:
        - Result
      summary: Incomming checker results
      parameters:
        - in: path
          name: sid
          required: true
          description: Submission id
          schema:
            type: integer
        - in: path
          name: cid
          required: true
          description: Configuration id
          schema:
            type: integer
      responses:
        "200":
          description: OK
        "400":
          description: Bad Request
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
        "404":
          description: Not Found
  "/analysis/courses/{cid}/results/{tid}":
    get:
      operationId: getAnonymisedCourseTaskResults

      tags:
        - Analysis
      summary: Get anonymised results of a course from an task
      parameters:
        - name: cid
          in: path
          description: course id
          required: true
          schema:
            type: integer
        - name: tid
          in: path
          description: Task id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            "application/json":
              schema:
                $ref: "#/components/schemas/AnalysisCourseResult"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
  "/sqlChecker/{tid}/queries/sumUpCorrect":
    get:
      operationId: getSqlCheckerQueriesSumUpCorrect

      tags:
        - SQL Checker
      summary: Add up correct in false for give conditon
      parameters:
        - name: tid
          in: path
          description: Task id
          required: true
          schema:
            type: integer
        - name: returns
          in: query
          description: what summs to return
          schema:
            type: string
            enum: [ "tables", "attributes" ]
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            "application/json":
              schema:
                type: object
                properties:
                  trueCount:
                    type: number
                  falseCount:
                    type: number
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
  "/sqlChecker/{tid}/queries/sumUpCorrectCombined":
    get:
      operationId: getSqlCheckerQueriesSumUpCorrectCombined

      tags:
        - SQL Checker
      summary: Add up correct in false for give conditon
      parameters:
        - name: tid
          in: path
          description: Task id
          required: true
          schema:
            type: integer
        - name: return
          in: query
          description: what summs to return
          schema:
            type: string
            enum: [ "tables", "attributes" ]
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            "application/json":
              schema:
                type: object
                properties:
                  trueCount:
                    type: number
                  falseCount:
                    type: number
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
  "/sqlChecker/{tid}/queries/listByType":
    get:
      operationId: getSqlCheckerQueriesListByType

      tags:
        - SQL Checker
      summary: Add up correct in false for give conditon
      parameters:
        - name: tid
          in: path
          description: Task id
          required: true
          schema:
            type: integer
        - name: return
          in: query
          description: what queries to return
          schema:
            type: string
            enum: [ "tables", "attributes" ]
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            "application/json":
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/SQLCheckerQuery"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
  "/sqlChecker/{tid}/queries/listByTypes":
    get:
      operationId: getSqlCheckerQueriesListByTypes

      tags:
        - SQL Checker
      summary: Add up correct in false for give conditon
      parameters:
        - name: tid
          in: path
          description: Task id
          required: true
          schema:
            type: integer
        - name: tables
          in: query
          description: condition for tables
          schema:
            type: boolean
        - name: attributes
          in: query
          description: condition for attributes
          schema:
            type: boolean
      responses:
        "200":
          description: OK
          headers:
            Authorization:
              description: Bearer
              schema:
                type: string
          content:
            "application/json":
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/SQLCheckerQuery"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
  "/api/v2/playground/{uid}/databases":
    get:
      operationId: getPlaygroundDatabases
      tags:
        - SQL Playground API
      summary: Get all playground databases for a given user
      parameters:
        - name: uid
          in: path
          description: user id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          content:
            "*/*":
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Database"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
    post:
      tags:
        - SQL Playground API
      operationId: createPlaygroundDatabase
      summary: Create a new playground databases for a given user
      parameters:
        - name: uid
          in: path
          description: user id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/DatabaseCreation"
        required: true
      responses:
        "200":
          description: OK
          content:
            "*/*":
              schema:
                $ref: "#/components/schemas/Database"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
  "/api/v2/playground/{uid}/databases/{dbId}/results":
    get:
      tags:
        - SQL Playground API
      operationId: getPlaygroundDatabaseResults
      summary: Get playground database results for a given user
      parameters:
        - name: uid
          in: path
          description: user id
          required: true
          schema:
            type: integer
        - name: dbId
          in: path
          description: user id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          content:
            "*/*":
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/SQLResponse"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
  "/api/v2/playground/{uid}/databases/{dbId}/results/{rId}":
    get:
      tags:
        - SQL Playground API
      operationId: getPlaygroundDatabaseResult
      summary: Get playground database result for a given user and result
      parameters:
        - name: uid
          in: path
          description: user id
          required: true
          schema:
            type: integer
        - name: dbId
          in: path
          description: database id
          required: true
          schema:
            type: integer
        - name: rId
          in: path
          description: database id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          content:
            "*/*":
              schema:
                $ref: "#/components/schemas/SQLResponse"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
  "/api/v2/playground/{uid}/databases/{dbId}/reset":
    post:
      operationId: resetPlaygroundDatabase
      summary: Rest playground database for a given user and database
      tags:
        - SQL Playground API
      parameters:
        - name: uid
          in: path
          description: user id
          required: true
          schema:
            type: integer
        - name: dbId
          in: path
          description: user id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
  "/api/v2/playground/{uid}/databases/{dbId}/execute":
    post:
      tags:
        - SQL Playground API
      operationId: executePlaygroundDatabaseStatement
      summary: Execute a statment on the given Playground Database
      parameters:
        - name: uid
          in: path
          description: user id
          required: true
          schema:
            type: integer
        - name: dbId
          in: path
          description: user id
          required: true
          schema:
            type: integer
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SQLQuery"
        required: true
      responses:
        "200":
          description: OK
          content:
            "*/*":
              schema:
                $ref: "#/components/schemas/SQLExecuteResponse"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
  "/api/v2/playground/{uid}/databases/{dbId}":
    get:
      operationId: getPlaygroundDatabase
      summary: Get the given Playground database
      tags:
        - SQL Playground API
      parameters:
        - name: uid
          in: path
          description: user id
          required: true
          schema:
            type: integer
        - name: dbId
          in: path
          description: user id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          content:
            "*/*":
              schema:
                $ref: "#/components/schemas/Database"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
    delete:
      tags:
        - SQL Playground API
      operationId: deletePlaygroudDatabase
      summary: Delete the given Playground database
      parameters:
        - name: uid
          in: path
          description: user id
          required: true
          schema:
            type: integer
        - name: dbId
          in: path
          description: user id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          content:
            "*/*":
              schema:
                $ref: "#/components/schemas/Database"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
  "/api/v2/playground/{uid}/databases/{dbId}/tables":
    get:
      operationId: getPlaygroundDatabaseTables
      summary: Get all Tabels from the given Playground Database
      tags:
        - SQL Playground API
      parameters:
        - name: uid
          in: path
          description: user id
          required: true
          schema:
            type: integer
        - name: dbId
          in: path
          description: user id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          content:
            "*/*":
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/SQLTable"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
  "/api/v2/playground/{uid}/databases/{dbId}/views":
    get:
      operationId: getPlaygroundDatabaseViews
      summary: Get all Views from the given Playground Database
      tags:
        - SQL Playground API
      parameters:
        - name: uid
          in: path
          description: user id
          required: true
          schema:
            type: integer
        - name: dbId
          in: path
          description: user id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          content:
            "*/*":
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/SQLView"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
  "/api/v2/playground/{uid}/databases/{dbId}/triggers":
    get:
      operationId: getPlaygroundDatabaseTriggers
      summary: Get all Triggers from the given Playground Database
      tags:
        - SQL Playground API
      parameters:
        - name: uid
          in: path
          description: user id
          required: true
          schema:
            type: integer
        - name: dbId
          in: path
          description: user id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          content:
            "*/*":
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/SQLTrigger"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
  "/api/v2/playground/{uid}/databases/{dbId}/routines":
    get:
      operationId: getPlaygroundDatabaseRoutines
      summary: Get all Routines from the given Playground Database
      tags:
        - SQL Playground API
      parameters:
        - name: uid
          in: path
          description: user id
          required: true
          schema:
            type: integer
        - name: dbId
          in: path
          description: user id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          content:
            "*/*":
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/SQLRoutine"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
  "/api/v2/playground/{uid}/databases/{dbId}/constraints":
    get:
      operationId: getPlaygroundDatabaseConstraints
      summary: Get all Constraints from the given Playground Database
      tags:
        - SQL Playground API
      parameters:
        - name: uid
          in: path
          description: user id
          required: true
          schema:
            type: integer
        - name: dbId
          in: path
          description: user id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
          content:
            "*/*":
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/SQLTableConstraints"
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
  "/api/v2/playground/{uid}/databases/{dbId}/activate":
    post:
      tags:
        - SQL Playground API
      operationId: activatePlaygroundDatabase
      summary: Activate the given Playground Database
      parameters:
        - name: uid
          in: path
          description: user id
          required: true
          schema:
            type: integer
        - name: dbId
          in: path
          description: user id
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: OK
        "401":
          description: Unauthorized
        "403":
          description: Forbidden
servers:
  - url: https://feedback.mni.thm.de/api/v1
components:
  requestBodies:
    Task:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Task"
      description: Task object to create
      required: true
  securitySchemes:
    JWT:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    User:
      type: object
      required:
        - username
        - prename
        - surname
        - postname
        - email
        - password
      properties:
        id:
          type: integer
        prename:
          type: string
        surname:
          type: string
        email:
          type: string
        password:
          type: string
          description: Only for creation
        username:
          type: string
        alias:
          type: string
        globalRole:
          type: string
          description: "Either, ADMIN, MODERATOR, or USER. Default is USER"
    Course:
      type: object
      required:
        - name
      properties:
        id:
          type: integer
        name:
          type: string
        description:
          type: string
        visible:
          type: boolean
        semesterId:
          type: integer
    SemesterCreate:
      type: object
      required:
        - name
      properties:
        name:
          type: string
    Semester:
      type: object
      required:
        - name
      properties:
        id:
          type: integer
        name:
          type: string
    Group:
      type: object
      properties:
        id:
          type: integer
        cid:
          type: integer
        name:
          type: string
        membership:
          type: integer
        visible:
          type: boolean
    GroupRequest:
      type: object
      properties:
        name:
          type: string
        membership:
          type: integer
        visible:
          type: boolean
      required:
        - name
        - membership
        - visible
    Task:
      type: object
      required:
        - name
      properties:
        id:
          type: integer
        name:
          type: string
        isPrivate:
          type: boolean
        description:
          type: string
        deadline:
          type: string
          description: ISO-8601 time as string
        mediaType:
          type: string
          description: The media type for the submissions according to RFC 4288
        mediaInformation:
          description: Media type spezific Information
          oneOf:
            - $ref: "#/components/schemas/SpreadsheetInformationRequest"
            - $ref: "#/components/schemas/SpreadsheetInformationResponse"
        requirementType:
          type: string
          description: The type of requirment like "mandatory", "bonus/additional", etc.
          default: "mandatory"
          enum:
            - "mandatory"
            - "optional"
            - "practice"
        attempts:
          type: number
          nullable: true
    SpreadsheetInformationRequest:
      type: object
      properties:
        idField:
          type: string
        inputFields:
          type: string
        outputFields:
          type: string
        pointFields:
          type: string
    SpreadsheetInformationResponse:
      type: object
      properties:
        fields:
          type: object
          properties:
            inputs:
              type: array
              items:
                type: object
            outputs:
              type: array
              items:
                type: string
    Submission:
      type: object
      required:
        - submissionTime
        - done
        - id
        - results
      properties:
        submissionTime:
          type: integer
          description: Unix time as long
        done:
          type: boolean
          description: True if all checkers have checked the submissions
        id:
          type: integer
          description: The submission id
        results:
          type: array
          description: The check results of each configured checker, may be empty
          items:
            $ref: "#/components/schemas/CheckResult"
    CheckResult:
      type: object
      required:
        - exitCode
        - resultText
        - checkerType
        - configurationId
      properties:
        exitCode:
          type: integer
          description: Exit code of the check result 0 is okay
        resultText:
          type: string
          description: The output the check
        checkerType:
          type: string
          description: The type of the checker that checked the submission
        configurationId:
          type: integer
          description: The configuration id of the checker configuration
        extInfo:
          type: object
          nullable: true
          additionalProperties: true
          description: Extended information of the check
    CheckerConfig:
      type: object
      required:
        - checkerType
        - ord
      properties:
        id:
          type: integer
        checkerType:
          type: string
        mainFileUploaded:
          type: boolean
          description: True if main file was provided
        secondaryFileUploaded:
          type: boolean
          description: True if secondary file was provided
        ord:
          type: integer
          description: Defines in which order the checker are executed
    Participant:
      type: object
      properties:
        user:
          $ref: "#/components/schemas/User"
        role:
          type: string
          description: Users course role name. Either DOCENT, TUTOR, or STUDENT.
    AddEvaluationContainer:
      type: object
      required:
        - id
      properties:
        id:
          type: integer
        toPass:
          type: integer
          description: The number of tasks that need to be passed
        bonusFormula:
          type: string
          description: The formula that defines when you get the bonus points of the container
        hidePoints:
          type: boolean
    EvaluationContainer:
      type: object
      required:
        - id
        - tasks
      properties:
        id:
          type: integer
        tasks:
          type: array
          description: "List of tasks"
          items:
            $ref: "#/components/schemas/Task"
        toPass:
          type: integer
          description: The number of tasks that need to be passed
        bonusFormula:
          type: string
          description: The formula that defines when you get the bonus points of the container
        hidePoints:
          type: boolean
    CourseResult:
      type: array
      items:
        type: object
        required:
          - user
          - passed
          - reqPassed
          - pointScore
          - bonusScore
          - results
        properties:
          user:
            $ref: "#/components/schemas/User"
          passed:
            type: boolean
          results:
            type: object
            required:
              - task
              - attempts
              - passed
            properties:
              task:
                $ref: "#/components/schemas/Task"
              attempts:
                type: integer
              passed:
                type: boolean
    AnalysisCourseResult:
      type: array
      items:
        type: object
        required:
          - submission
          - passed
          - resultText
          - userId
          - attempt
        properties:
          submission:
            type: string
            description: The submission of the user
          passed:
            type: boolean
            description: Was the task passed?
          resultText:
            type: string
            description: The result of the test
          userId:
            type: integer
            description: An identification number for the user. However, this does not correspond to the correct userId, but is incremented during creation.
          attempt:
            type: integer
            description: Attempt number
    EvaluationResults:
      type: array
      items:
        type: object
        required:
          - user
          - bonusPoints
          - passed
          - results
        properties:
          user:
            $ref: "#/components/schemas/User"
          bonusPoints:
            type: integer
          passed:
            type: boolean
          results:
            $ref: "#/components/schemas/EvaluationContainerResults"
    EvaluationContainerResults:
      type: array
      items:
        type: object
        required:
          - bonusPoints
          - passed
          - passedTasks
          - container
        properties:
          bonusPoints:
            type: integer
          passed:
            type: boolean
          passedTasks:
            type: integer
          container:
            $ref: "#/components/schemas/EvaluationContainerResult"
    EvaluationContainerResult:
      allOf:
        - $ref: "#/components/schemas/EvaluationContainer"
        - type: object
          required:
            - id
            - tasks
            - toPass
            - bonusFormula
            - hidePoints
          properties:
            tasks:
              type: object
              required:
                - task
                - attempts
                - passed
              properties:
                task:
                  $ref: "#/components/schemas/Task"
                attempts:
                  type: integer
                passed:
                  type: boolean
    SubTaskResult:
      type: object
      properties:
        name:
          type: string
        points:
          type: number
        maxPoints:
          type: number
    UserTaskResult:
      type: object
      properties:
        points:
          type: number
        maxPoints:
          type: number
        passed:
          type: boolean
        submission:
          type: boolean
    SubTaskStatistics:
      type: object
      properties:
        taskID:
          type: number
        name:
          type: string
        subtasks:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
              maxPoints:
                type: number
              avgPoints:
                type: number
    SQLCheckerQuery:
      type: object
      properties:
        id:
          type: string
        taskNumber:
          type: number
        statement:
          type: string
        queryRight:
          type: boolean
        parsable:
          type: boolean
        tablesRight:
          type: boolean
        attributesRight:
          type: boolean
        whereAttributesRight:
          type: boolean
        stringsRight:
          type: boolean
        userId:
          type: number
        attempt:
          type: number
    DatabaseCreation:
      type: object
      properties:
        name:
          type: string
    Database:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        version:
          type: string
        dbType:
          type: string
        active:
          type: boolean
    SQLResponse:
      type: object
      properties:
        error:
          type: boolean
        errorMsg:
          type: string
        result:
          type: array
          items:
            "$ref": "#/components/schemas/SQLResponseTable"
    SQLResponseTable:
      type: object
      properties:
        head:
          type: array
          items:
            type: string
        rows:
          type: array
          items:
            type: string
    SQLQuery:
      type: object
      properties:
        statement:
          type: string
    SQLTable:
      type: object
      properties:
        name:
          type: string
        columns:
          type: array
          items:
            $ref: "#/components/schemas/SQLTableColumn"
    SQLTableColumn:
      type: object
      properties:
        name:
          type: string
        udtName:
          type: string
        isNullable:
          type: boolean
    SQLView:
      type: object
      properties:
        table:
          type: string
        definition:
          type: string
    SQLTrigger:
      type: object
      properties:
        name:
          type: string
        statement:
          type: string
        orientation:
          type: string
        timing:
          type: string
        manipulation:
          type: array
          items:
            type: string
            enum: [ INSERT, UPDATE, DELETE ]
        objectTable:
          type: string
    SQLRoutine:
      type: object
      properties:
        name:
          type: string
        type:
          type: string
        definition:
          type: string
    SQLTableConstraints:
      type: object
      properties:
        table:
          type: string
        constraints:
          type: array
          items:
            $ref: "#/components/schemas/SQLConstraint"
    SQLConstraint:
      type: object
      properties:
        name:
          type: string
        type:
          type: string
        columnName:
          type: string
        checkClause:
          type: string
    SQLExecuteResponse:
      type: object
      properties:
        statement:
          type: string
        runIn:
          $ref: "#/components/schemas/Database"
        id:
          type: integer
          format: int32
