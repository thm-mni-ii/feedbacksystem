<div class="example-container mat-elevation-z8">
  <mat-table #table [dataSource]="dataSource">
    <!-- Name Column -->
    <ng-container matColumnDef="name">
      <mat-header-cell *matHeaderCellDef> Aufgaben </mat-header-cell>
      <mat-cell class="task-name" *matCellDef="let data">
        {{ data.name }}
      </mat-cell>
    </ng-container>
    <!-- CellName Column -->
    <ng-container matColumnDef="cellName">
      <mat-header-cell *matHeaderCellDef> Zelle </mat-header-cell>
      <mat-cell *matCellDef="let data">
        <mat-tree
          [dataSource]="treeDataSources[data.name]"
          [treeControl]="treeControl"
        >
          <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>
            <div
              class="cellTreeNode"
              [ngClass]="{ cellTreeNodeConsequent: node.isConsequent }"
            >
              {{ node.cellName }}
            </div>
          </mat-tree-node>
          <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
            <div class="mat-tree-node">
              <div class="cellTreeNode">
                {{ node.cellName }}
              </div>
              <button
                mat-icon-button
                matTreeNodeToggle
                class="treeToggleBtn"
                matTooltip="Folgefehler anzeigen"
              >
                <mat-icon class="mat-icon-rtl-mirror">
                  {{
                    treeControl.isExpanded(node) ? "expand_less" : "expand_more"
                  }}
                </mat-icon>
              </button>
            </div>
            <div
              [class.example-tree-invisible]="!treeControl.isExpanded(node)"
              role="group"
            >
              <ng-container matTreeNodeOutlet></ng-container>
            </div>
          </mat-nested-tree-node>
        </mat-tree>
      </mat-cell>
    </ng-container>

    <!-- Weight Column -->
    <ng-container matColumnDef="errorHint">
      <mat-header-cell *matHeaderCellDef> Hinweis </mat-header-cell>
      <mat-cell *matCellDef="let data">
        <mat-tree
          [dataSource]="treeDataSources[data.name]"
          [treeControl]="treeControl"
        >
          <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>
            {{ node.errorHint }}
          </mat-tree-node>
          <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
            <div class="mat-tree-node">
              {{ node.errorHint }}
            </div>
            <div
              [class.example-tree-invisible]="!treeControl.isExpanded(node)"
              role="group"
            >
              <ng-container matTreeNodeOutlet></ng-container>
            </div>
          </mat-nested-tree-node>
        </mat-tree>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="table">
      <mat-header-cell *matHeaderCellDef> Tabelle </mat-header-cell>
      <mat-cell *matCellDef="let data">
        <button mat-icon-button matTooltip="Tabelle anzeigen">
          <mat-icon fontIcon="table_view"></mat-icon>
        </button>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="result">
      <mat-header-cell *matHeaderCellDef> Ergebnis </mat-header-cell>
      <mat-cell *matCellDef="let data">
        <mat-icon class="done" *ngIf="data.result === true">done</mat-icon>
        <mat-icon class="not-done" *ngIf="data.result === false"
          >clear</mat-icon
        >
      </mat-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
  </mat-table>
</div>
