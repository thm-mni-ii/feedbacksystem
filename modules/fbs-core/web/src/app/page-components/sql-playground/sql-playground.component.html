<div class="grid">
  <div class="results-grid">
    <app-bordered-container
      [xScrollable]="true"
      [yScrollable]="false"
      title="{{ 'sql-playground.results' | i18nextEager }}"
    >
      <ng-container *ngIf="selectedDbType === 'postgres'; else mongoOutput">
        <app-dynamic-result-table></app-dynamic-result-table>
      </ng-container>

      <ng-template #mongoOutput>
        <div class="mongo-output" *ngIf="mongoRawResult$ | async as result">
          <pre><code class="language-json">{{ result | json }}</code></pre>
        </div>
      </ng-template>
    </app-bordered-container>
  </div>

  <div class="input-grid">
    <app-bordered-container [input]="true">
      <app-sql-input-tabs
        [dbType]="selectedDbType"
        (submitStatement)="submitStatement($event)"
      ></app-sql-input-tabs>
    </app-bordered-container>
  </div>

  <div class="db-grid">
    <app-bordered-container
      title="{{ 'sql-playground.control' | i18nextEager }}"
    >
      <app-db-control-panel
        (changeActiveDbId)="changeActiveDbId($event)"
        (submitStatement)="submitStatement($event)"
        (dbChanged)="onDbChanged($event)"
        (mongoDbSelected)="onMongoDbSelected($event)"
        (schemaReload)="schemaReload$.next()"
      ></app-db-control-panel>
    </app-bordered-container>
  </div>
  <div class="db-schema-grid">
    <app-bordered-container
      [yScrollable]="true"
      title="{{ 'sql-playground.dbSchema' | i18nextEager }}"
    >
      <app-db-scheme
        [reloadTrigger]="schemaReload$"
        (submitStatement)="submitStatement($event)"
      ></app-db-scheme>
    </app-bordered-container>
  </div>
</div>
